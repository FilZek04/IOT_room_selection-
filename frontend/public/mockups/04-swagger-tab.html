<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - IoT Room Selection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f7fafc;
        }

        .header {
            background: white;
            padding: 20px 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 1.875rem;
            color: #1a202c;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
        }

        .tab {
            padding: 10px 20px;
            background: #e2e8f0;
            border-radius: 6px;
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .swagger-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .api-info {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .api-title {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .api-version {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .api-description {
            color: #718096;
            margin-top: 15px;
            line-height: 1.6;
        }

        .endpoint {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .endpoint-header {
            padding: 15px 20px;
            background: white;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }

        .method {
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.875rem;
            min-width: 60px;
            text-align: center;
        }

        .method.get {
            background: #c6f6d5;
            color: #22543d;
        }

        .method.post {
            background: #bee3f8;
            color: #2c5282;
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            color: #2d3748;
            font-size: 1rem;
        }

        .endpoint-description {
            color: #718096;
            flex: 1;
        }

        .endpoint-body {
            padding: 20px;
            display: none;
        }

        .endpoint.expanded .endpoint-body {
            display: block;
        }

        .section-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            margin-top: 15px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 10px 0;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .param-table th {
            background: #e2e8f0;
            padding: 10px;
            text-align: left;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .param-table td {
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.875rem;
        }

        .try-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .try-button:hover {
            background: #5568d3;
        }

        .note {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 12px;
            margin: 15px 0;
            font-size: 0.875rem;
            color: #856404;
        }
    </style>
    <script>
        function toggleEndpoint(id) {
            const endpoint = document.getElementById(id);
            endpoint.classList.toggle('expanded');
        }
    </script>
</head>
<body>
    <div class="header">
        <h1>ðŸ“š API Documentation</h1>
        <div class="nav-tabs">
            <a href="01-home.html" class="tab">Room Selection</a>
            <a href="04-swagger-tab.html" class="tab active">API Docs</a>
        </div>
    </div>

    <div class="container">
        <div class="swagger-container">
            <div class="api-info">
                <div class="api-title">IoT Room Selection API</div>
                <span class="api-version">v1.0.0</span>
                <p class="api-description">
                    REST API for the IoT Room Selection Decision Support System.
                    Provides endpoints for retrieving room data, evaluating rooms based on user preferences,
                    and accessing AHP criteria hierarchy.
                </p>
            </div>

            <div class="note">
                <strong>Note:</strong> This is a mockup. In production, this tab will embed the actual Swagger UI
                loading from <code>http://localhost:8000/openapi.json</code>
            </div>

            <!-- GET /api/rooms -->
            <div class="endpoint" id="endpoint-1" onclick="toggleEndpoint('endpoint-1')">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="endpoint-path">/api/rooms</span>
                    <span class="endpoint-description">List all rooms with sensor data</span>
                </div>
                <div class="endpoint-body">
                    <div class="section-title">Description</div>
                    <p>Returns a list of all available rooms with their current sensor readings and facilities information.</p>

                    <div class="section-title">Response (200 OK)</div>
                    <div class="code-block">
[
  {
    "room_id": "Room_1",
    "name": "Room_1",
    "temperature": 22.99,
    "co2": 702.97,
    "humidity": 49.82,
    "air_quality": 25.08,
    "noise": 49.84,
    "light": 548.64,
    "voc": 249.66,
    "seating_capacity": 62,
    "has_projector": true,
    "computers": 0,
    "has_robots": false
  }
]
                    </div>

                    <button class="try-button">Try it out</button>
                </div>
            </div>

            <!-- POST /api/evaluate -->
            <div class="endpoint" id="endpoint-2" onclick="toggleEndpoint('endpoint-2')">
                <div class="endpoint-header">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/evaluate</span>
                    <span class="endpoint-description">Evaluate and rank rooms</span>
                </div>
                <div class="endpoint-body">
                    <div class="section-title">Description</div>
                    <p>Evaluates all rooms based on user preferences and requirements, returns ranked results using AHP algorithm.</p>

                    <div class="section-title">Request Body</div>
                    <div class="code-block">
{
  "user_requirements": {
    "required_seats": 30,
    "need_projector": true,
    "need_computers": 0
  },
  "preferences": {
    "main_comparisons": {
      "Comfort-Health": 3,
      "Comfort-Usability": 5,
      "Health-Usability": 2
    }
  },
  "profile_adjustments": {
    "temperature": { "min": 20, "max": 24 },
    "co2": { "max": 600 },
    "humidity": { "min": 40, "max": 60 }
  }
}
                    </div>

                    <div class="section-title">Parameters</div>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>user_requirements</td>
                                <td>object</td>
                                <td>No</td>
                                <td>User's facility requirements</td>
                            </tr>
                            <tr>
                                <td>preferences</td>
                                <td>object</td>
                                <td>No</td>
                                <td>Saaty scale pairwise comparisons (1-9)</td>
                            </tr>
                            <tr>
                                <td>profile_adjustments</td>
                                <td>object</td>
                                <td>No</td>
                                <td>Custom environmental thresholds</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="section-title">Response (200 OK)</div>
                    <div class="code-block">
{
  "rankings": [
    {
      "rank": 1,
      "room_id": "Room_2",
      "room_name": "Room_2",
      "final_score": 0.92,
      "comfort_score": 0.89,
      "health_score": 0.95,
      "usability_score": 0.91
    }
  ],
  "weights": {
    "Comfort": 0.45,
    "Health": 0.35,
    "Usability": 0.20
  },
  "consistency_ratio": 0.05,
  "is_consistent": true
}
                    </div>

                    <button class="try-button">Try it out</button>
                </div>
            </div>

            <!-- GET /api/criteria -->
            <div class="endpoint" id="endpoint-3" onclick="toggleEndpoint('endpoint-3')">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="endpoint-path">/api/criteria</span>
                    <span class="endpoint-description">Get AHP criteria hierarchy</span>
                </div>
                <div class="endpoint-body">
                    <div class="section-title">Description</div>
                    <p>Returns the complete AHP criteria hierarchy with default weights for all levels.</p>

                    <div class="section-title">Response (200 OK)</div>
                    <div class="code-block">
{
  "main": ["Comfort", "Health", "Usability"],
  "comfort": ["Temperature", "Lighting", "Noise", "Humidity"],
  "health": ["CO2", "Air Quality", "VOC"],
  "usability": ["Seating", "Equipment", "AV Facilities"],
  "weights": {
    "main": {
      "Comfort": 0.40,
      "Health": 0.35,
      "Usability": 0.25
    },
    "comfort": {
      "Temperature": 0.35,
      "Lighting": 0.25,
      "Noise": 0.25,
      "Humidity": 0.15
    }
  }
}
                    </div>

                    <button class="try-button">Try it out</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
